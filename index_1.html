<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi Network App</title>
    <!-- Pi SDK 불러오기 -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
    <h1>Pi Network SDK 테스트</h1>
    <button onclick="authenticateUser()">Pi 로그인</button>

    <script>
        // ✅ Pi SDK 초기화 (Pi Browser에서 실행될 경우 필수)
        document.addEventListener("DOMContentLoaded", function () {
            Pi.init({ version: "2.0", sandbox: true });
        });

        // ✅ 로그인 버튼이 눌렸을 때 실행되는 함수
        function authenticateUser() {
            console.log("🔹 Pi 로그인 버튼 클릭됨!");
            
            const scopes = ['payments', 'username'];
            Pi.authenticate(scopes, function(payment) {
                console.log('🔹 미완료 결제 발견:', payment);
            })
            .then(function(auth) {
                console.log('✅ 인증 성공:', auth);
                alert("로그인 성공! 사용자 정보: " + JSON.stringify(auth));
            })
            .catch(function(error) {
                console.error('❌ 인증 실패:', error);
                alert("로그인 실패! Pi Browser에서 실행해야 할 수도 있습니다.");
            });
        }
    </script>
</body>
</html>
